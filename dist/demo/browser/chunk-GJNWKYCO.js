import{A as J,D as K,E as Q,G as W,H as X,b as k,d,da as Y,ea as Z,f as R,fa as $,g as T,ga as ee,i as L,k as q,l as B,o as N,p as O,q as j,r as D,s as A,t as G,v as V,w as H,y as U,z}from"./chunk-CZWLAQN2.js";import{Aa as b,Ba as a,Eb as S,Jb as w,Ka as t,La as r,Ma as f,S as M,Sb as y,Sc as E,Ta as g,Tb as ne,Tc as P,Uc as x,Vc as I,Xc as F,db as i,eb as C,ja as n,ka as p,kb as v,xa as c}from"./chunk-SI2QUH7E.js";function Ce(o,u){o&1&&(t(0,"mat-error"),i(1," Email is required "),r())}function Me(o,u){o&1&&(t(0,"mat-error"),i(1," Please enter a valid email "),r())}function ve(o,u){o&1&&(t(0,"mat-error"),i(1," Password is required "),r())}var ae=(()=>{class o{constructor(s,m,e,l){this.fb=s,this.authService=m,this.router=e,this.snackBar=l,this.hidePassword=!0,this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",d.required]})}onSubmit(){if(this.loginForm.valid){let{email:s,password:m}=this.loginForm.value;this.authService.login(s,m).subscribe({next:e=>{this.snackBar.open("Login successful!","Close",{duration:3e3}),e.role==="admin"?this.router.navigate(["/admin"]):this.router.navigate(["/books"])},error:e=>{this.snackBar.open("Login failed: "+e.message,"Close",{duration:3e3})}})}}static{this.\u0275fac=function(m){return new(m||o)(p(N),p(F),p(y),p(Y))}}static{this.\u0275cmp=M({type:o,selectors:[["app-login"]],standalone:!0,features:[v],decls:42,vars:9,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","email","type","email","placeholder","Enter your email"],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],[1,"register-link"],["mat-button","","color","primary","routerLink","/auth/register"],[1,"demo-credentials"],[1,"credential-box"]],template:function(m,e){if(m&1&&(t(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),i(4,"Login"),r(),t(5,"mat-card-subtitle"),i(6,"Sign in to your account"),r()(),t(7,"mat-card-content")(8,"form",2),g("ngSubmit",function(){return e.onSubmit()}),t(9,"mat-form-field",3)(10,"mat-label"),i(11,"Email"),r(),f(12,"input",4),c(13,Ce,2,0,"mat-error",5)(14,Me,2,0,"mat-error",5),r(),t(15,"mat-form-field",3)(16,"mat-label"),i(17,"Password"),r(),f(18,"input",6),t(19,"button",7),g("click",function(){return e.hidePassword=!e.hidePassword}),t(20,"mat-icon"),i(21),r()(),c(22,ve,2,0,"mat-error",5),r(),t(23,"button",8),i(24," Login "),r(),t(25,"div",9),i(26," Don't have an account? "),t(27,"a",10),i(28,"Register here"),r()()(),t(29,"div",11)(30,"h3"),i(31,"Demo Credentials"),r(),t(32,"div",12)(33,"strong"),i(34,"Admin:"),r(),t(35,"code"),i(36,"admin@library.com / admin123"),r()(),t(37,"div",12)(38,"strong"),i(39,"User:"),r(),t(40,"code"),i(41,"user@library.com / user123"),r()()()()()()),m&2){let l,h,_;n(8),a("formGroup",e.loginForm),n(5),a("ngIf",(l=e.loginForm.get("email"))==null?null:l.hasError("required")),n(),a("ngIf",(h=e.loginForm.get("email"))==null?null:h.hasError("email")),n(4),a("type",e.hidePassword?"password":"text"),n(),b("aria-label","Hide password")("aria-pressed",e.hidePassword),n(2),C(e.hidePassword?"visibility_off":"visibility"),n(),a("ngIf",(_=e.loginForm.get("password"))==null?null:_.hasError("required")),n(),a("disabled",e.loginForm.invalid)}},dependencies:[w,S,O,L,k,R,T,q,B,ne,H,j,A,V,G,D,X,W,K,U,z,J,I,P,E,x,Q,Z,ee,$],styles:[".login-container[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:center;align-items:center;background:#f5f5f5}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:2rem}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.register-link[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.demo-credentials[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1rem;border-top:1px solid #eee}.demo-credentials[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:#666}.credential-box[_ngcontent-%COMP%]{background:#f8f9fa;padding:.5rem;border-radius:4px;margin-bottom:.5rem}code[_ngcontent-%COMP%]{background:#e9ecef;padding:.2rem .4rem;border-radius:4px;margin-left:.5rem}"]})}}return o})();function Se(o,u){o&1&&(t(0,"mat-error"),i(1," Username is required "),r())}function we(o,u){o&1&&(t(0,"mat-error"),i(1," Email is required "),r())}function ye(o,u){o&1&&(t(0,"mat-error"),i(1," Please enter a valid email "),r())}function Ee(o,u){o&1&&(t(0,"mat-error"),i(1," Password is required "),r())}function Pe(o,u){o&1&&(t(0,"mat-error"),i(1," Password must be at least 6 characters "),r())}function xe(o,u){o&1&&(t(0,"mat-error"),i(1," Password confirmation is required "),r())}function Ie(o,u){o&1&&(t(0,"mat-error"),i(1," Passwords do not match "),r())}var me=(()=>{class o{constructor(s,m,e,l){this.fb=s,this.authService=m,this.router=e,this.snackBar=l,this.hidePassword=!0,this.hideConfirmPassword=!0,this.registerForm=this.fb.group({username:["",d.required],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]]},{validator:this.passwordMatchValidator})}passwordMatchValidator(s){return s.get("password")?.value===s.get("confirmPassword")?.value?null:{passwordMismatch:!0}}onSubmit(){if(this.registerForm.valid){let{username:s,email:m,password:e}=this.registerForm.value;this.authService.register(s,m,e).subscribe({next:()=>{this.snackBar.open("Registration successful! Please login.","Close",{duration:3e3}),this.router.navigate(["/auth/login"])},error:l=>{this.snackBar.open(l.message||"Registration failed","Close",{duration:3e3})}})}}static{this.\u0275fac=function(m){return new(m||o)(p(N),p(F),p(y),p(Y))}}static{this.\u0275cmp=M({type:o,selectors:[["app-register"]],standalone:!0,features:[v],decls:44,vars:17,consts:[[1,"register-container"],[1,"register-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","Enter your username"],[4,"ngIf"],["matInput","","formControlName","email","type","email","placeholder","Enter your email"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","Confirm your password",3,"type"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],[1,"login-link"],["mat-button","","color","primary","routerLink","/auth/login"]],template:function(m,e){if(m&1&&(t(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),i(4,"Register"),r(),t(5,"mat-card-subtitle"),i(6,"Create your account"),r()(),t(7,"mat-card-content")(8,"form",2),g("ngSubmit",function(){return e.onSubmit()}),t(9,"mat-form-field",3)(10,"mat-label"),i(11,"Username"),r(),f(12,"input",4),c(13,Se,2,0,"mat-error",5),r(),t(14,"mat-form-field",3)(15,"mat-label"),i(16,"Email"),r(),f(17,"input",6),c(18,we,2,0,"mat-error",5)(19,ye,2,0,"mat-error",5),r(),t(20,"mat-form-field",3)(21,"mat-label"),i(22,"Password"),r(),f(23,"input",7),t(24,"button",8),g("click",function(){return e.hidePassword=!e.hidePassword}),t(25,"mat-icon"),i(26),r()(),c(27,Ee,2,0,"mat-error",5)(28,Pe,2,0,"mat-error",5),r(),t(29,"mat-form-field",3)(30,"mat-label"),i(31,"Confirm Password"),r(),f(32,"input",9),t(33,"button",8),g("click",function(){return e.hideConfirmPassword=!e.hideConfirmPassword}),t(34,"mat-icon"),i(35),r()(),c(36,xe,2,0,"mat-error",5)(37,Ie,2,0,"mat-error",5),r(),t(38,"button",10),i(39," Register "),r(),t(40,"div",11),i(41," Already have an account? "),t(42,"a",12),i(43,"Login here"),r()()()()()()),m&2){let l,h,_,te,re,ie,oe;n(8),a("formGroup",e.registerForm),n(5),a("ngIf",(l=e.registerForm.get("username"))==null?null:l.hasError("required")),n(5),a("ngIf",(h=e.registerForm.get("email"))==null?null:h.hasError("required")),n(),a("ngIf",(_=e.registerForm.get("email"))==null?null:_.hasError("email")),n(4),a("type",e.hidePassword?"password":"text"),n(),b("aria-label","Hide password")("aria-pressed",e.hidePassword),n(2),C(e.hidePassword?"visibility_off":"visibility"),n(),a("ngIf",(te=e.registerForm.get("password"))==null?null:te.hasError("required")),n(),a("ngIf",(re=e.registerForm.get("password"))==null?null:re.hasError("minlength")),n(4),a("type",e.hideConfirmPassword?"password":"text"),n(),b("aria-label","Hide password")("aria-pressed",e.hideConfirmPassword),n(2),C(e.hideConfirmPassword?"visibility_off":"visibility"),n(),a("ngIf",(ie=e.registerForm.get("confirmPassword"))==null?null:ie.hasError("required")),n(),a("ngIf",(oe=e.registerForm.get("confirmPassword"))==null?null:oe.hasError("passwordMismatch")),n(),a("disabled",e.registerForm.invalid)}},dependencies:[w,S,O,L,k,R,T,q,B,H,j,A,V,G,D,X,W,K,U,z,J,I,P,E,x,Q,Z,ee,$],styles:[".register-container[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:center;align-items:center;background:#f5f5f5}.register-card[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:2rem}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.login-link[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}mat-card-header[_ngcontent-%COMP%]{margin-bottom:1rem}mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}"]})}}return o})();var Xe=[{path:"login",component:ae},{path:"register",component:me}];export{Xe as AUTH_ROUTES};
